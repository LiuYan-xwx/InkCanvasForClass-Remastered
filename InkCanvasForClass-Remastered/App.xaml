<Application
    x:Class="InkCanvasForClass_Remastered.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:local="clr-namespace:InkCanvasForClass_Remastered"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tb="http://www.hardcodet.net/taskbar"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    xmlns:viewModels="clr-namespace:InkCanvasForClass_Remastered.ViewModels"
    mc:Ignorable="d">
    <Application.Resources>
        <ResourceDictionary>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <Style TargetType="ui:ScrollViewerEx">
                <EventSetter Event="PreviewMouseWheel" Handler="ScrollViewer_PreviewMouseWheel" />
            </Style>
            <ContextMenu
                x:Key="SysTrayMenu"
                Padding="4"
                d:DataContext="{d:DesignInstance viewModels:TrayIconMenuViewModel}"
                x:Shared="false">
                <MenuItem
                    Command="{Binding HideOrShowMainWindowCommand}"
                    IsCheckable="True"
                    IsChecked="{Binding ShowMainWindowChecked}">
                    <MenuItem.Header>
                        <ui:IconAndText
                            Content="显示 ICC-Re 主窗口"
                            HorizontalAlignment="Left"
                            Icon="{x:Static ui:FluentSystemIcons.Window_20_Regular}"
                            IconSize="20" />
                    </MenuItem.Header>
                </MenuItem>
                <Separator />
                <MenuItem>
                    <MenuItem.Header>
                        <ui:IconAndText
                            Content="禁用所有快捷键"
                            HorizontalAlignment="Left"
                            Icon="{x:Static ui:FluentSystemIcons.Keyboard_20_Regular}"
                            IconSize="20" />
                    </MenuItem.Header>
                </MenuItem>
                <MenuItem Command="{Binding FoldFloatingBarCommand}">
                    <MenuItem.Header>
                        <ui:IconAndText
                            Content="切换浮动栏收纳模式"
                            HorizontalAlignment="Left"
                            Icon="{x:Static ui:FluentSystemIcons.Eye_20_Regular}"
                            IconSize="20" />
                    </MenuItem.Header>
                </MenuItem>
                <MenuItem Command="{Binding ResetFloatingBarPositionCommand}">
                    <MenuItem.Header>
                        <ui:IconAndText
                            Content="重置工具栏位置"
                            HorizontalAlignment="Left"
                            Icon="{x:Static ui:FluentSystemIcons.Location_20_Regular}"
                            IconSize="20" />
                    </MenuItem.Header>
                </MenuItem>
                <Separator />
                <MenuItem Name="RestartAppTrayIconMenuItem" Command="{Binding RestartAppCommand}">
                    <MenuItem.Header>
                        <ui:IconAndText
                            Content="重启软件"
                            HorizontalAlignment="Left"
                            Foreground="#2563eb"
                            Icon="{x:Static ui:FluentSystemIcons.ArrowCounterclockwise_20_Regular}"
                            IconSize="20" />
                    </MenuItem.Header>
                </MenuItem>
                <MenuItem Name="CloseAppTrayIconMenuItem" Command="{Binding CloseAppCommand}">
                    <MenuItem.Header>
                        <ui:IconAndText
                            Content="退出软件"
                            HorizontalAlignment="Left"
                            Foreground="#dc2626"
                            Icon="{x:Static ui:FluentSystemIcons.Power_20_Regular}"
                            IconSize="20" />
                    </MenuItem.Header>
                </MenuItem>
            </ContextMenu>
            <tb:TaskbarIcon
                x:Key="TaskbarTrayIcon"
                ContextMenu="{StaticResource SysTrayMenu}"
                IconSource="/Resources/ICC-Re.ico"
                ToolTipText="InkCanvasForClass-Remastered" />
            <ResourceDictionary.MergedDictionaries>
                <ui:ThemeResources RequestedTheme="Light" />
                <ui:XamlControlsResources />
                <ResourceDictionary Source="Resources/SeewoImageDictionary.xaml" />
                <ResourceDictionary Source="Resources/DrawShapeImageDictionary.xaml" />
                <ResourceDictionary Source="Resources/IconImageDictionary.xaml" />
                <ResourceDictionary Source="Resources/Styles/Light.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Resources/IconData.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application>
