<Window
    x:Class="InkCanvasForClass_Remastered.RandWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:local="clr-namespace:InkCanvasForClass_Remastered"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    xmlns:viewmodel="clr-namespace:InkCanvasForClass_Remastered.ViewModels"
    Title="InkCanvasForClass-Remastered 抽奖"
    Width="900"
    Height="500"
    d:DataContext="{d:DesignInstance viewmodel:RandViewModel}"
    ui:ThemeManager.RequestedTheme="Light"
    AllowsTransparency="True"
    Background="Transparent"
    FontFamily="Microsoft YaHei UI"
    Loaded="Window_Loaded"
    Topmost="True"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>
    <Border
        Background="#F0F3F9"
        BorderBrush="#0066BF"
        BorderThickness="1"
        ClipToBounds="True"
        CornerRadius="10">
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  主内容区域  -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!--  结果显示区  -->
                <Viewbox
                    Grid.Column="0"
                    MaxWidth="320"
                    Margin="16,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <ItemsControl
                        Name="ItemsControlOutput"
                        HorizontalAlignment="Center"
                        ItemsSource="{Binding SelectedNames}"
                        ToolTip="显示抽取结果">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="2" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock
                                    Margin="16,8"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontSize="64"
                                    Text="{Binding}"
                                    TextAlignment="Center" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Viewbox>

                <!--  控制面板  -->
                <ikw:SimpleStackPanel
                    Name="PeopleControlPane"
                    Grid.Column="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Spacing="16">
                    <!--  抽取数量控制  -->
                    <ikw:SimpleStackPanel
                        HorizontalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="12">
                        <Border
                            x:Name="BorderBtnMinus"
                            Width="64"
                            Height="64"
                            Background="#FBFBFD"
                            CornerRadius="32"
                            Cursor="Hand"
                            MouseUp="BorderBtnMinus_MouseUp">
                            <Border.Effect>
                                <DropShadowEffect
                                    BlurRadius="3"
                                    Direction="0"
                                    Opacity="0.15"
                                    ShadowDepth="0" />
                            </Border.Effect>
                            <Viewbox Margin="18">
                                <Image Width="18" Height="18">
                                    <Image.Source>
                                        <DrawingImage>
                                            <DrawingImage.Drawing>
                                                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                                                    <DrawingGroup Opacity="1">
                                                        <DrawingGroup.ClipGeometry>
                                                            <RectangleGeometry
                                                                RadiusX="0"
                                                                RadiusY="0"
                                                                Rect="0,0,24,24" />
                                                        </DrawingGroup.ClipGeometry>
                                                        <GeometryDrawing Brush="#FF000000" Geometry="F0 M24,24z M0,0z M4,12C4,11.4477,4.44772,11,5,11L19,11C19.5523,11 20,11.4477 20,12 20,12.5523 19.5523,13 19,13L5,13C4.44772,13,4,12.5523,4,12z" />
                                                    </DrawingGroup>
                                                </DrawingGroup>
                                            </DrawingImage.Drawing>
                                        </DrawingImage>
                                    </Image.Source>
                                </Image>
                            </Viewbox>
                        </Border>

                        <TextBlock
                            Name="LabelNumberCount"
                            MinWidth="70"
                            Margin="8,0"
                            VerticalAlignment="Center"
                            FontFamily="Consolas"
                            FontSize="52"
                            FontWeight="SemiBold"
                            Text="{Binding DrawCount}"
                            TextAlignment="Center" />

                        <Border
                            x:Name="BorderBtnAdd"
                            Width="64"
                            Height="64"
                            Background="#FBFBFD"
                            CornerRadius="32"
                            Cursor="Hand"
                            MouseUp="BorderBtnAdd_MouseUp">
                            <Border.Effect>
                                <DropShadowEffect
                                    BlurRadius="3"
                                    Direction="0"
                                    Opacity="0.15"
                                    ShadowDepth="0" />
                            </Border.Effect>
                            <Viewbox Margin="18">
                                <Image Width="18" Height="18">
                                    <Image.Source>
                                        <DrawingImage>
                                            <DrawingImage.Drawing>
                                                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                                                    <DrawingGroup Opacity="1">
                                                        <DrawingGroup.ClipGeometry>
                                                            <RectangleGeometry
                                                                RadiusX="0"
                                                                RadiusY="0"
                                                                Rect="0,0,24,24" />
                                                        </DrawingGroup.ClipGeometry>
                                                        <GeometryDrawing Brush="#18181b" Geometry="F0 M24,24z M0,0z M13,5C13,4.44772 12.5523,4 12,4 11.4477,4 11,4.44772 11,5L11,11 5,11C4.44772,11 4,11.4477 4,12 4,12.5523 4.44772,13 5,13L11,13 11,19C11,19.5523 11.4477,20 12,20 12.5523,20 13,19.5523 13,19L13,13 19,13C19.5523,13 20,12.5523 20,12 20,11.4477 19.5523,11 19,11L13,11 13,5z" />
                                                    </DrawingGroup>
                                                </DrawingGroup>
                                            </DrawingImage.Drawing>
                                        </DrawingImage>
                                    </Image.Source>
                                </Image>
                            </Viewbox>
                        </Border>
                    </ikw:SimpleStackPanel>

                    <!--  选项复选框  -->
                    <CheckBox
                        Content="不重复抽取"
                        Margin="0,8"
                        HorizontalAlignment="Center"
                        IsChecked="{Binding IsNoDuplicate, Mode=TwoWay}" />

                    <!--  开抽按钮  -->
                    <Border
                        x:Name="BorderBtnRand"
                        Height="64"
                        MinWidth="200"
                        Padding="20,0"
                        Background="#0066BF"
                        CornerRadius="32"
                        Cursor="Hand"
                        MouseUp="BorderBtnRand_MouseUp">
                        <Border.Effect>
                            <DropShadowEffect
                                BlurRadius="4"
                                Direction="0"
                                Opacity="0.2"
                                ShadowDepth="0" />
                        </Border.Effect>
                        <ikw:SimpleStackPanel
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Orientation="Horizontal"
                            Spacing="12">
                            <ui:SymbolIcon
                                Name="SymbolIconStart"
                                FontSize="24"
                                Foreground="White"
                                Symbol="Contact" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="28"
                                FontWeight="Medium"
                                Foreground="White"
                                Text="开抽" />
                        </ikw:SimpleStackPanel>
                    </Border>
                </ikw:SimpleStackPanel>
            </Grid>

            <!--  底部区域  -->
            <Grid Grid.Row="1">
                <ikw:SimpleStackPanel
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Orientation="Horizontal"
                    Spacing="16">
                    <!--  名单导入按钮  -->
                    <Border
                        x:Name="BorderBtnHelp"
                        Height="40"
                        Padding="12,0"
                        Background="#FBFBFD"
                        CornerRadius="20"
                        Cursor="Hand"
                        MouseUp="BorderBtnHelp_MouseUp"
                        UseLayoutRounding="True"
                        Visibility="{Binding Settings.DisplayRandWindowNamesInputBtn, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <Border.Effect>
                            <DropShadowEffect
                                BlurRadius="3"
                                Direction="0"
                                Opacity="0.15"
                                ShadowDepth="0" />
                        </Border.Effect>
                        <ikw:SimpleStackPanel
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Orientation="Horizontal"
                            Spacing="8">
                            <ui:SymbolIcon
                                FontSize="16"
                                Foreground="Black"
                                Symbol="People" />
                            <TextBlock
                                Name="TextBlockPeopleCount"
                                VerticalAlignment="Center"
                                FontSize="14"
                                Text="点击此处以导入名单" />
                        </ikw:SimpleStackPanel>
                    </Border>

                    <!--  关闭按钮  -->
                    <Border
                        x:Name="BtnClose"
                        Width="40"
                        Height="40"
                        Background="#E32A34"
                        CornerRadius="20"
                        Cursor="Hand"
                        MouseUp="BtnClose_MouseUp"
                        UseLayoutRounding="True">
                        <Border.Effect>
                            <DropShadowEffect
                                BlurRadius="3"
                                Direction="0"
                                Opacity="0.15"
                                ShadowDepth="0" />
                        </Border.Effect>
                        <ui:SymbolIcon
                            FontSize="16"
                            Foreground="White"
                            Symbol="Clear" />
                    </Border>
                </ikw:SimpleStackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
